<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vite + TS</title>

        <script>
            WeakMap.prototype.getOrInsert ??= function (key, defaultValue) {
                if (!this.has(key)) { this.set(key, defaultValue); }
                return this.get(key);
            };

            WeakMap.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
                if (!this.has(key)) { this.set(key, callbackFunction(key)); }
                return this.get(key);
            };

            Map.prototype.getOrInsert ??= function (key, defaultValue) {
                if (!this.has(key)) { this.set(key, defaultValue); }
                return this.get(key);
            };

            Map.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
                if (!this.has(key)) { this.set(key, callbackFunction(key)); }
                return this.get(key);
            };
        </script>

        <!-- -->
        <script type="importmap">{
            "imports": {
                "fest/": "fest-src/",
                "fest/cdnImport": "fest/cdnImport",
                "fest/dom": "fest-src/dom.ts/src/index.ts",
                "fest/lure": "fest-src/BLU.E/src/index.ts",
                "fest/object": "fest-src/object.ts/src/index.ts",
                "fest/uniform": "fest-src/uniform.ts/src/index.ts",
                "fest/theme": "fest-src/theme.core/src/index.ts"
            }
        }</script>

        <style>
            .color-section {
                display: flex;
                flex-direction: row;
                gap: 24px;
                inline-size: 100%;
            }

            .theme-section {
                margin: 24px 0;
                padding: 16px 0;
                container-type: inline-size;
                container-name: color-section;
                contain: none;
                flex-grow: 1;
            }
            .color-title {
                font-weight: bold;
                margin-block-end: 8px;
                font-size: 1.1em;
                letter-spacing: 0.05em;
            }
            .color-row {
                display: flex;
                gap: 16px;
            }
            .color-block {
                inline-size: 60px;
                block-size: 60px;
                border-radius: 16px;
                box-shadow: 0 2px 8px 0 #0002;
                display: flex;
                align-items: flex-end;
                justify-content: center;
                position: relative;
                transition: transform 0.2s, box-shadow 0.2s;
                border: 2px solid #fff4;
                overflow: hidden;
            }
            .color-block:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 16px 0 #0003;
            }

            .tone-label {
                background-color: transparent;
                background: #fff8;
                color: #222;
                font-size: 0.9em;
                padding: 2px 8px;
                border-radius: 8px 8px 0 0;
                position: absolute;
                inset-block-end: 0;
                inset-inline-start: 0;
                inset-inline-end: 0;
                text-align: center;
                pointer-events: none;
                user-select: none;
            }

            .text-test {
                position: absolute;
                background: transparent;
                color: inherit;
                inset-inline-start: 50%;
                inset-block-start: 50%;
                transform: translateY(-6px) translate(-50%, -50%) scale(1.2);
                font-size: 1.5em;
                font-weight: bold;
                inline-size: max-content;
                block-size: max-content;
                display: flex;
                place-content: center;
                place-items: center;
                text-align: center;
                user-select: none;
                pointer-events: none;
            }

            .light {
                color-scheme: light;
                --detected-theme: 1;
            }
            .dark {
                color-scheme: dark;
                --detected-theme: 0;
            }
        </style>
    </head>
    <body>
        <div id="app"></div>
        <script type="module" src="./test/ctm-2.ts"></script>
    </body>
</html>
